<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TV Player</title>

  <!-- مكتبات -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="//content.jwplatform.com/libraries/SAHhwvZq.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      overflow: hidden;
    }
    #player {
      width: 100% !important;
      height: 100% !important;
      outline: none;
    }

    /* تكبير الأزرار */
    .jw-controlbar .jw-icon-inline,
    .jw-controlbar .jw-icon-tooltip {
      width: 60px !important;
      height: 60px !important;
    }
    .jw-controlbar .jw-icon-inline .jw-svg-icon,
    .jw-controlbar .jw-icon-tooltip .jw-svg-icon {
      width: 30px !important;
      height: 30px !important;
    }

    /* ريموت */
    .jw-controlbar .jw-icon-inline.focused,
    .jw-controlbar .jw-icon-tooltip.focused {
      outline: 3px solid #f44336;
      box-shadow: 0 0 10px #f44336;
    }

    /* عدم ظهور شريط تحميل */
    .jw-spinner,
    .jw-display-icon-container {
      display: none !important;
    }
  </style>
</head>
<body>

  <div id="player" tabindex="0"></div>

<script>
document.addEventListener("DOMContentLoaded", async function () {

  // ملء الشاشة + Landscape
  const elt = document.documentElement;
  if (elt.requestFullscreen) { try { await elt.requestFullscreen(); } catch(e){} }
  if (screen.orientation && screen.orientation.lock) {
    try { await screen.orientation.lock("landscape"); } catch(e){}
  }

  // مفتاح JW Player
  jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";

  // جودة 1080
  const url1080 = "https://mejarserver.site/cast-b14k/index.mpd";

  // جودة 720
  const url720 = "https://mejarserver.site/cast-b1/index.mpd";

  // إعداد المشغل
  const player = jwplayer("player").setup({
    width: "100%",
    height: "100%",
    controls: true,
    autostart: true,
    stretching: "uniform",

    playlist: [{
      title: "Multi Quality Stream",
      sources: [
        {
          file: url1080,
          type: "dash",
          label: "1080p",
          default: true
        },
        {
          file: url720,
          type: "dash",
          label: "720p"
        }
      ]
    }]
  });

  // زر التوسيع
  const expandSvg = `<svg fill="#fff" width="24" height="24"></svg>`;
  player.on("ready", () => {
    player.addButton(
      expandSvg,
      "توسيع الفيديو",
      () => {
        const vid = document.querySelector("#player video");
        if (!vid) return;
        vid.style.objectFit = (vid.style.objectFit === "contain") ? "fill" : "contain";
      },
      "jw-expandButton"
    );

    // ريموت
    const bar = document.querySelector(".jw-controlbar");
    if (bar) {
      const btns = bar.querySelectorAll(".jw-icon-inline, .jw-icon-tooltip");
      btns.forEach(btn => {
        btn.setAttribute("tabindex", "0");
        btn.addEventListener("focus", () => btn.classList.add("focused"));
        btn.addEventListener("blur",  () => btn.classList.remove("focused"));
      });

      document.addEventListener("keydown", evt => {
        const arr = Array.from(bar.querySelectorAll('[tabindex="0"]'));
        const idx = arr.indexOf(document.activeElement);
        let next;

        if (evt.key === "ArrowRight") next = (idx + 1) % arr.length;
        else if (evt.key === "ArrowLeft") next = (idx - 1 + arr.length) % arr.length;
        else return;

        arr[next].focus();
        evt.preventDefault();
      });
    }
  });

});
</script>

</body>
</html>