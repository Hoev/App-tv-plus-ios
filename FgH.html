<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TV Player - HLS</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="//content.jwplatform.com/libraries/SAHhwvZq.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      overflow: hidden;
    }
    #player {
      width: 100% !important;
      height: 100% !important;
      outline: none;
    }
    /* تنسيق الأزرار */
    .jw-controlbar .jw-icon-inline,
    .jw-controlbar .jw-icon-tooltip {
      width: 60px !important;
      height: 60px !important;
    }
    .jw-controlbar .jw-icon-inline .jw-svg-icon,
    .jw-controlbar .jw-icon-tooltip .jw-svg-icon {
      width: 30px !important;
      height: 30px !important;
    }
    /* تأثير التركيز */
    .jw-controlbar .jw-icon-inline.focused,
    .jw-controlbar .jw-icon-tooltip.focused {
      outline: 3px solid #f44336;
      box-shadow: 0 0 10px #f44336;
    }
  </style>
</head>
<body>

  <div id="player" tabindex="0"></div>

  <script>
    document.addEventListener("DOMContentLoaded", async function () {
      // إعدادات ملء الشاشة والقفل (كما هي)
      const elt = document.documentElement;
      if (elt.requestFullscreen) { try { await elt.requestFullscreen(); } catch(e) {} }
      if (screen.orientation && screen.orientation.lock) { try { await screen.orientation.lock('landscape'); } catch (e) {} }

      // مفتاح JW Player
      jwplayer.key = 'XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo';

      // --- البيانات الجديدة ---
      // ملاحظة: الرابط HTTP وليس HTTPS، تأكد من تشغيل الصفحة عبر HTTP أو السماح بالمحتوى المختلط
      const streamUrl = "http://154.48.204.53/lbengine/+ph/hL7cfc7iriv9H1YNWBcJ8NIkjx9fm09rdSh5gd4sBvwmpoIzCU5u__ih__MNx__hi__WyvAnYnitjKmOy1ENq8dW5ZV7jMemYMgKlhq7my5g87WVDtvJbp82R80QY074Jr__ih__6VylD__ih__wNAzQ372f__ih__UwioQhMqaJ68a4NocJTmkS__hi__bt__ih__HTPO7V2ND__ih__n60RR__ih__4__hi__alKEodxC7c2a0m0r6HeG__ih__8Hk__hi__k4NwdiDgjTrNgZlz6qiDqP__hi__ISwGsqiSMnCdg3nMguWNQQ1tMfZHvNI6s7gVQGFDc8zJvC0FPB9MzHIbd9gw5sOVaPnwy2M=---/cache/Bein-Sp1-LB/master.m3u8";

      setupJWPlayer(streamUrl);
    });

    function setupJWPlayer(url) {
      const playerInstance = jwplayer("player");
      playerInstance.setup({
        width: "100%",
        height: "100%",
        controls: true,
        stretching: "uniform",
        autostart: true,
        mute: false,
        // إعدادات HLS
        hlshtml: true, 
        type: "hls",
        
        // إزالة مفاتيح DRM لأن الرابط الجديد لا يبدو أنه يستخدم Clearkey بنفس طريقة الرابط السابق
        playlist: [{
          file: url,
          type: "hls",
          // تمت إزالة DRM Clearkey لأن الرابط m3u8
        }]
      });

      // إضافة زر التوسيع والتحكم بالريموت (كما هو في كودك الأصلي)
      const expandSvg = `<svg fill="#ffffff" viewBox="0 0 100 100" width="24px" height="24px"><path d="M..."></path></svg>`; // تم الاختصار للحفاظ على النظافة

      playerInstance.on("ready", function () {
        // ... (نفس منطق الأزرار والـ tabindex الخاص بك) ...
        const controlBar = document.querySelector('.jw-controlbar');
        if (controlBar) {
             // إعادة تطبيق منطق الريموت كنترول هنا
             const buttons = controlBar.querySelectorAll('.jw-icon-inline, .jw-icon-tooltip');
             buttons.forEach(btn => {
                btn.setAttribute('tabindex', '0');
                btn.addEventListener('focus', () => btn.classList.add('focused'));
                btn.addEventListener('blur',  () => btn.classList.remove('focused'));
             });
        }
      });
      
      // التعامل مع أخطاء التشغيل
      playerInstance.on('error', function(e) {
          console.log("Error details:", e);
          if(e.message && e.message.includes("network")) {
              alert("قد تكون المشكلة بسبب User-Agent أو حظر CORS من السيرفر.");
          }
      });
    }
  </script>
</body>
</html>
