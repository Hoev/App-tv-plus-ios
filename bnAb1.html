<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TV Player</title>

<!-- مكتبة JW Player الصحيحة -->
<script src="https://cdn.jwplayer.com/libraries/SAHhwvZq.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: black;
  overflow: hidden;
}
#player {
  width: 100%;
  height: 100%;
}

/* قائمة الجودة */
#qualityMenu {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 99999;
  background: rgba(0,0,0,0.65);
  padding: 10px 14px;
  border-radius: 14px;
  color: white;
  font-size: 16px;
  display: none;
}
#qualityMenu div {
  padding: 6px 10px;
  cursor: pointer;
}
#qualityMenu div:hover {
  background: #f44336;
  border-radius: 6px;
}
</style>
</head>
<body>

<div id="player"></div>
<div id="qualityMenu"></div>

<script>
jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";

// رابط البث بعد التصحيح
const streamUrl =
  "https://prod-fastly-eu-central-1.video.pscp.tv/Transcoding/v1/hls/Ozl9eei_79-HW10_b6E_0SY-Gp74OtjT_lFme7LPF92Bjs4TtYOqVvL7QbDPPfTKdJyaOg-gf7CSGMX5SDZRFQ/non_transcode/eu-central-1/periscope-replay-direct-prod-eu-central-1-public/master_dynamic_highlatency.m3u8?type=live";

// تشغيل المشغل
const player = jwplayer("player").setup({
  file: streamUrl,
  type: "hls",
  autostart: true,
  controls: true,
  width: "100%",
  height: "100%",
  stretching: "uniform"
});

// تحميل الدقات
player.on("levels", function() {

  const levels = player.getQualityLevels();
  const menu = document.getElementById("qualityMenu");

  menu.innerHTML = ""; // تنظيف القائمة

  levels.forEach((level, index) => {
    const item = document.createElement("div");
    item.innerText = level.label || ("جودة " + (index + 1));
    item.onclick = () => {
      player.setCurrentQuality(index);
    };
    menu.appendChild(item);
  });
});

// إظهار وإخفاء قائمة الجودة مع الأزرار
player.on("controls", function(e) {
  document.getElementById("qualityMenu").style.display = e.controls ? "block" : "none";
});
</script>

</body>
</html>