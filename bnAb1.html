<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TV Player</title>
<script src="//content.jwplatform.com/libraries/SAHhwvZq.js"></script>
<style>
html, body { margin:0; padding:0; height:100%; background:black; }
#player { width:100%; height:100%; }
#qualityMenu {
  position:absolute; top:10px; right:10px; z-index:999;
  background: rgba(0,0,0,0.65); padding:10px 14px; border-radius:12px; color:white; font-size:16px; display:none;
}
#qualityMenu div { padding:6px 10px; cursor:pointer; }
#qualityMenu div:hover { background:#f44336; border-radius:6px; }
</style>
</head>
<body>

<div id="player"></div>
<div id="qualityMenu"></div>

<script>
jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";

const streamUrl = "https://prod-fastly-eu-central-1.video.pscp.tv/Transcoding/v1/hls/Ozl9eei_79-HW10_b6E_0SY-Gp74OtjT_lFme7LPF92Bjs4TtYOqVvL7QbDPPfTKdJyaOg-gf7CSGMX5SDZRFQ/non_transcode/eu-central-1/periscope-replay-direct-prod-eu-central-1-public/master_dynamic_highlatency.m3u8?type=live";

const player = jwplayer("player").setup({
    file: streamUrl,
    type: "hls",
    autostart: true,
    controls: true,
    width: "100%",
    height: "100%",
    stretching: "uniform"
});

// إنشاء قائمة الجودة
const qualityMenu = document.getElementById("qualityMenu");

player.on("levels", function() {
    const levels = player.getQualityLevels();
    qualityMenu.innerHTML = "";
    levels.forEach((level, index) => {
        const div = document.createElement("div");
        div.innerText = level.label || "جودة " + (index+1);
        div.onclick = () => player.setCurrentQuality(index);
        qualityMenu.appendChild(div);
    });
});

// عرض القائمة عند ظهور الأزرار وإخفائها عند اختفائها
player.on("controls", function(e) {
    qualityMenu.style.display = e.controls ? "block" : "none";
});
</script>

</body>
</html>